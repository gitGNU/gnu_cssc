1998-05-05  James Youngman  <jay@gnu.org>

	* CSSC-0.06alpha.pl6 released.
	
	* NEWS: Added entry about "sccs.c".

1998-05-04  James Youngman  <jay@gnu.org>

	* bsd/sccs.c, bsd/pathnames.h, Makefile.am:
	Attempted to make the location of "sccs" configurable.   Also attempted to add const modifiers where useful.

	* NEWS: Added "-t" option.

	* sccsfile.cc:
	Use signed arithmetic for checksums.    I *think* that matches the
	"real" SCCS.  Also produce what I hope are more useful messages when
	the checksum is incorrect (or even the checksum header is missing).

	* sccsfile.h:
	Use signed arithmetic for checksums.    I *think* that matches the
	"real" SCCS.

	* configure.in: Added the "bsd" directory.

	* tests/get/branch.sh:
	Added note about the SCO version of "unget" being silent.

	* docs/cssc.texi:
	texi2html doesn't expand homegrown macros, so we have to write the
	maintainer's email address out by hand in each place.

	* docs/Platforms: Added note for IRIX.

	* sid.h: Removed a #pragma -- they're not portable anyway.

	* pipe.h: Use "class foo : public bar {}" not "class foo : bar { }".

	* pfile.h: Removed a #pragma -- they're not portable anyway.

	* mystring.h:
	Added comment about functions disalbigiated only by the constness of
	*this.   Some versions of the IRIX C++ compiler don't like that (error
	3392).

	* linebuf.h: Actually remove a #pragma that had been commented out.

	* filelock.h: Explicitly use "private" in inheritance spec
	(e.g. 'class foo : private bar {}') ,
	we can't just leave it out.

	* fileiter.cc:
	If an argument is a directory which is named so as to end in a slash,
	don't coredump.

1998-03-18  James Youngman  <jay@gnu.org>

	* bsd/sccs.c: Reindented with GNU Indent.

	* bsd/sccs.c: Many const-correctness changes.

1998-03-17  James Youngman  <jay@gnu.org>

	* bsd/Makefile.am, bsd/Makefile.bsd, bsd/COPYING.bsd, bsd/Makefile:
	Updated the copyright info.  There is a different copyright situation
	locally in this dir.

	* bsd/sccs.c:
	Eliminated many compiler warnings.  Partial Autoconf conversion.

	* bsd/sccs.c: Use stdarg.h instead of old-style /*VARARGS1*/ etc.

1998-03-16  James Youngman  <jay@gnu.org>

	* bsd/sccs.me, bsd/sccs.c, bsd/pathnames.h, bsd/sccs.1, bsd/Makefile:
	Added files from the Berkeley sccs.c implementation.

1998-03-15  James Youngman  <jay@gnu.org>

	* tests/get/t-option.sh, docs/style.txt, docs/get-spec.txt, docs/cssc.texi, docs/Makefile.am, docs/TODO, sf-get2.cc, get.cc, Makefile.am:
	Implemented the "-t" option of get.

	* tests/get/t-option.sh: Tests for the -t option of get.

1998-03-14  James Youngman  <jay@gnu.org>

	* sccsdate.cc, sccsfile.cc, sf-get.cc, configure.in, file.cc, filediff.cc, admin.cc, bodyio.cc:
	Fixed some compiler warnings, no change in functionality.

	* docs/Makefile.am: Added mailing-list.txt.

	* docs/mailing-list.txt:
	Information about the mailing list for GNU CSSC.

	* docs/patches.txt:
	Requested that people specify the purpose of the submitted patch, and
	delete all editor backup files before generating it.

	* testutils/lndir.c, testutils/ekko.c:
	Eliminate some compiler warnings; falling off the end of int-returning
	functions and that sort of thing.

	* testutils/seeker.c:
	setlinebuf() is not a standard ISO-C library function and SCO Unix
	(for example) does not provide it.  It has an exact setvbuf()
	equivalent, so use that instead.

1998-03-11  James Youngman  <jay@gnu.org>

	* auxfiles/Makefile.am, Makefile.am, configure.in:
	Added the "auxfiles" directory so that CSSC.spec is distributed.

	* ChangeLog, NEWS: Detailed the updates for CSSC-0.06alpha-pl5.

	* auxfiles/CSSC.spec, configure.in: Bumped patchlevel to 5.

	* docs/FIXED, docs/BUGS: Oops.  Left a fixed bug in eocs/BUGS --
	and the patchlevel number for the first fixed version was wrong.
	All better now.

	* tests/rmdel/basic.sh:
	Make sure that the revision we tried to remove is actually now absent.

	* tests/common/command-names, tests/rmdel/basic.sh, docs/BUGS,
	docs/CREDITS, docs/Platforms, tests/Makefile.am, sf-rmdel.cc:
	Fixed bug in "rmdel" reported by Peter Kjellerstedt.  "rmdel" had
	been deleting all the control lines.

1998-03-10  James Youngman  <jay@gnu.org>

	* docs/FIXED, auxfiles/CSSC.spec, NEWS, configure.in, ChangeLog:
	Miscellaneous updates for 0.06-pl4.

	* tests/Makefile.am:
	Don't export CVS directories into the distribution.

	* admin.cc:
	Absolute pathnames now work; bug reported by Wolfhard Straehle.

	* tests/admin/abspath.sh:
	Test for bug reported by Wolfhard Str\"ahle; admin -n /abs/path/s.foo
	fails because the "admin" code checks for an "s." after the first
	slash when in fact it should check for an "s." after the LAST one.

1998-03-10  James Youngman  <jay@gnu.org>

	* get.cc:
	Fixes from Peter Kjellerstedt.  First, correct output when a direcory
	is specified on the command line (get should always print the name of
	the current s-file).  Second, when multiple files are specified on the
	command line, don't corrupt the requested SID value by updating it
	with an actual SID value from some particular s-file.

	* sccsdiff.sh.in: Support for filenames containing spaces.

	* filediff.cc, filediff.h, sf-delta.cc:
	Better support for files whose names have spaces in them.

1998-03-09  James Youngman  <jay@gnu.org>

	* filediff.h, filediff.cc:
	finish() returns a bool; false if the child process returned nonzero.

	* sf-delta.cc, fileiter.cc:
	Make FileDiff::finish() return a bool; it returns false if pclose()
	indicates that the spawned process returned a nonzero exit status.
	[ REVERSED -- this was a BAD idea, diff returns 1 if the 
	  files differ! ]
	
	* sccsdiff.sh.in:
	Bug report from Richard Polton: IRIX's pr(1) requires a space between
	the "-h" and its argument.

1998-03-04  James Youngman  <jay@gnu.org>

	* tests/common/real-thing: Define TESTING_CSSC if $dir points at
	CSSC programs rather than SCCS programs.

	* tests/binary/auto.sh: Use $TESTING_CSSC to determine of we
	should run those tests that CSSC should pass but (some verisions
	of) SCCS cannot, instead of abusing $expect_fail.

	* docs/BUGS, docs/FIXED: Some entries moved from BUGS to FIXED.

1998-03-01  James Youngman  <jay@gnu.org>

	* Version 0.06alpha-pl3

	* auxfiles/CSSC.spec: 0.06alpha-pl3

	* configure.in, ChangeLog, NEWS:
	Updated the NEWS and ChangeLog files (0.06alpha-pl3)

	* tests/binary/auto.sh, tests/binary/seeking.sh:
	Tests for binary files and the "-i" option of admin.

	* docs/cssc.texi:
	Genuine SCCS doesn't always properly recover from finding out that
	the "-i" file for admin needs encoding, after having read some of it.

	* bodyio.cc, admin.cc:
	When generating a new SCCS file using the "-i" option of admin,
	we no longer need to be able to seek on that file if the input
	turns out to need encoding after we have read some of it.

	* tests/admin/i-option.sh: We no longer do fgetpos() on stdin.

1998-02-28  James Youngman  <jay@gnu.org>

	* xalloc.cc, xalloc.h, Makefile.am:
	Removed xalloc.cc and xalloc.h completely.

	* show-disp.sh:
	Cope correctly with locally removed files when the actual working file
	has been deleted.

	* docs/CREDITS, xalloc.cc, sl-merge.h, stack.h, sid_list.cc,
	sid_list.h, sid.cc, run.cc, seqstate.h, pipe.cc, linebuf.cc,
	linebuf.h, delta-table.cc, l-split.cc, cssc.h: Patches from
	Richard Polton to eliminate our xalloc.h wrapper for operator new,
	as various versions of GCC differ on the exception throwing
	specification -- if we don't have to override the operator new, we
	don't have to get the declaration right :-)

	* admin.cc:
	Turn off buffering on stdin, as a workaround for a bug in glibc 2.0.6.

	* tests/common/test-common: success(): Delete temporary files.

	* tests/admin/i-option.sh, tests/admin/t-option.sh:
	Temporarily mark the "admin -i" tests "expect-fail".

1998-02-24  James Youngman  <jay@gnu.org>

	* auxfiles/CSSC.spec: Updated the version.

	* tests/binary/char255.uue:
	This file contains one character (uuencoded), the ASCII code 255.

1998-02-23  James Youngman  <jay@gnu.org>

	* configure.in: Bumped version to 0.06alpha.pl2

	* ChangeLog.1, ChangeLog: *** empty log message ***

	* tests/binary/eightbit.sh, tests/binary/diff.sh, tests/Makefile.am:
	Run the binary-file tests as part of "make check".  Small fixes to
	those tests.

	* tests/binary/eightbit.sh, bodyio.cc, NEWS:
	Fixes to allow the character whose code is 255 to be properly handled.

	* tests/binary/eightbit.sh: Tests involving 8-bit bodies.

	* tests/binary/s.umsp.uue: SCCS file containing 8-bit characters.

	* docs/BUGS, docs/FIXED, sf-write.cc, sccsfile.cc: Checksum is now
	8-bit-clean, due to richardp@scopic.com and
	Peter.Kjellerstedt@axis.com.

	* testutils/Makefile.am:
	Added seeker.c, which tests for a particular bug in GNU libc 2.0.6.

	* unget.cc, what.cc, rmdel.cc, sact.cc, prt.cc, my-getopt.h,
	prs.cc, get.cc, my-getopt.cc, fileiter.h, delta.cc, fileiter.cc,
	admin.cc, cdc.cc: Renamed class getopt to class CSSC_Options, to
	avoid conflict with getopt(3) on systems such as netbsd-1.2 (as
	installed on melange.gnu.org)

	* testutils/seeker.c:
	Test program which determines if fgetpos() works correctly on stdin.

1998-02-21  James Youngman  <jay@gnu.org>

	* auxfiles/CSSC.spec: Corrected source file name.

	* auxfiles/CSSC.spec: Strip the installed binaries.

	* NEWS: Updated for CSSC-0.06devel-pl1.

	* ChangeLog: *** empty log message ***

	* what.cc, sid_list.cc, unget.cc, sf-prt.cc, sf-prs.cc,
	sf-get2.cc, sf-kw.cc, sf-get.cc, sf-chkid.cc, sf-delta.cc,
	sf-cdc.cc, sccsfile.h, sact.cc, sccsfile.cc, run.cc, run.h,
	rel_list.h, rmdel.cc, prt.cc, prompt.cc, prs.cc, pipe.h, pfile.h,
	pipe.cc, mystring.h, pfile.cc, mystring.cc, my-getopt.h, mylist.h,
	linebuf.h, my-getopt.cc, l-split.cc, linebuf.cc, get.cc, ioerr.h,
	fileiter.h, filepos.h, file.cc, delta.cc, encoding.cc, cssc.h,
	defaults.h, bodyio.h, cdc.cc, bodyio.cc: Updated the year in the
	copyright message for all those files modified so far in 1998.

	* docs/FIXED, docs/TODO, docs/BUGS: Added some bug reports.

	* unget.cc, sact.cc, sf-get.cc, rmdel.cc, prs.cc, prt.cc, my-getopt.cc, my-getopt.h, fileiter.h, get.cc, fileiter.cc, cdc.cc, delta.cc, admin.cc:
	Modified option processing so that "get s.foo -Gbaz" is equivalent
	to "get -Gbaz s.foo".

	* configure.in: Bumped version to 0.06-pl1.

	* docs/cssc.texi: Minor punctuation corrections.

	* tests/prs/keywords.sh: Added test for :PN:.

	* Makefile.am, sf-prs.cc:
	The prs keyword :PN: needs to produce the full pathname of the SCCS
	file, not just the name as specified on the command line.

	* tests/get/optorder.sh: Initial version.

1998-02-20  James Youngman  <jay@gnu.org>

	* sf-write.cc:
	Cope in a more user-friendly way with the prior existence of "x.foo".

	* docs/BUGS:
	Some bug reports from Peter Kjellerstedt <peter.Kjellerstedt@axis.com>
	and Dave Bodenstab <imdave@mcs.net>.

	* tests/get/sep_subst.sh:
	Make sure the substitution happens for the actual gotten delta, not
	the delta to which the current line belongs.

	* tests/get/sep_subst.sh: *** empty log message ***

	* tests/get/sep_subst.sh:
	Make sure that the delta information substituted for each line is the
	information for the delta that we are actually getting, not the delta
	information for the delta which last touched that line.

1998-02-12  James Youngman  <jay@gnu.org>

	* ChangeLog: *** empty log message ***

	* auxfiles/CSSC.spec: Updated RPM spec-file for version 0.06alpha.pl0.

	* ChangeLog: *** empty log message ***

	* docs/cssc.texi, docs/Platforms, docs/TODO, auxfiles/CSSC.spec, sf-write.cc, configure.in, sccsfile.cc, NEWS:
	Binary file support.

	* docs/missing.txt: Binary file support is now present.

	* tests/binary/binbasic.sh, filediff.h, sf-delta.cc, filediff.cc, Makefile.am, configure.in:
	First working binary file support.

1998-02-11  James Youngman  <jay@gnu.org>

	* tests/binary/auto.sh:
	Tests that ensure that admin correctly guesses if the original file is
	binary or not.

	* configure.in: Updated the patchlevel.

	* ChangeLog: *** empty log message ***

	* NEWS: Added the latest news.

	* docs/TODO, docs/BUGS, docs/FIXED:
	Updated the lists of bugs fixed, bugs discovered, and things to investigate.

	* pipe.h, pipe.cc:
	Some tidying.  This code seems problematic for binary files.  Some of
	the commented-out tests in tests/binary/binbasic.sh break it.

	* tests/get/create.sh: Corrected a comment.

	* tests/Makefile.am: Added testing fr binary files.

	* testutils/Makefile.am:
	Added "ekko", a substitute echo(1) for systems where the normal
	echo(1) does not support newline suppression and escape codes.

	* encoding.cc, bodyio.cc: Added support for deltaing encoded files.

	* auxfiles/CSSC.spec: Added the spec-file for RPM.

	* tests/delta/basic.sh:
	Make sure diff returns 0 for identical files and 1 for different ones.

	* bodyio.h, sf-kw.cc, linebuf.cc, sf-delta.cc:
	Support for deltaing encoded files.  We have a problem with the Pipe
	class and large input files (broken pipe) though.

	* file.cc, configure.in:
	Use stat() to detect if the g-file is writable, because if we are
	root, access() tells us yes even if the file is read-only.  This makes
	"get" fail, saying that a wrtable gfile exists.  Using stat() fixes
	this.

1998-02-10  James Youngman  <jay@gnu.org>

	* tests/common/test-common:
	Use testutils/ekko if no suitable echo(1) command exitst on the system
	(we need newline suppression and escape codes).

	* testutils/ekko.c:
	An echo(1) replacement for systems whose echo does not support escape
	codes and newline supression.

	* tests/binary/diff.sh, tests/binary/binbasic.sh:
	New tests for binary file support (get/delta etc).

	* docs/cssc.texi:
	Removed remarks about option processing, since we now do this the SCCS
	way.  Also, added remarks about the non-security of CSSC and advice not to install it setuid-root or use it as root.

1998-02-09  James Youngman  <jay@gnu.org>

	* sccsdiff.sh.in:
	Patch from Maurice O'Donnell <mod@tfn.com>: pass "-e" to sed before
	the sed commands.

	* tests/large/admin.sh, testutils/yes.c, testutils/Makefile.am:
	Solaris has no yes(1) utility so we roll our own.

1998-02-01  James Youngman  <jay@gnu.org>

	* bodyio.h: Prototypes for functions in bodyio.cc.

	* bodyio.cc:
	New file; functions for handling the I/O for the body of files
	(i.e. the bits that might be uuencoded).

	* ChangeLog, docs/TODO: *** empty log message ***

	* scripts/rev-freq.sh:
	Added rev-freq.sh, which generates a histogram of the distributon of
	CVS revision numbers.

	* config.h.in:
	This file is automatically generated by "autoheader".  We should not therefore keep it under CVS control, I think.

	* sccsfile.cc, pfile.cc:
	Added TODO comment for the places where we modify the contents of a
	cssc_linebuf nefariously.

	* Makefile.am:
	Added bodyio.cc and encoding.cc to those modules that now need it.

	* sf-get.cc:
	Added a no_decide flag to sccs_file::get() for the use of delta.  We
	need to be able to obtain the body in encoded form so that we can feed
	it to diff(1).

	* sf-delta.cc:
	cssc_linefuf now has its own check_id_keywords() member, as a
	preparatory step to 8-bit-cleanness.

	* sf-admin.cc:
	If body_insert() informs us that the body turned out to be binary, set
	flags.encoded so that sccs_file::end_update() can call
	rehack_encoded_flag() (in sf-write.cc).

	* sccsfile.h:
	Allow sccs_file::get() to be told not to uudecode an encoded file.  We
	do this in order to obtain the still-encoded text in otder for delta
	to feed it to diff.

	* linebuf.h, linebuf.cc:
	Changes for the beginnings of 8-bit-clean support.  We're not
	8-bit-clean yet though.  The class interface currently precludes it.

	* ioerr.h: Added fwrite_failed().

	* cssc.h, defaults.h:
	CONFIG_LINEBUF_CHUNK_SIZE is only used by linebuf.cc and only really
	needs ever to be changed as a tuning issue, so we #define it in
	linebuf.cc.  For the moment, we keep it low as this ensures that we
	debug the reallocation code.

	* configure.in:
	sf-chkid.cc can use memchr() if available, so detect it.

	* sf-chkid.cc: Rewrote check_id_keywords() for 8-bit-cleanness.

1998-01-25  James Youngman  <jay@gnu.org>

	* testutils/README, testutils/last-time.c, testutils/Makefile.am:
	Added last-time.c to the distribution.

	* tests/get/defsid.sh, tests/get/subst.sh: *** empty log message ***

	* tests/admin/flags.sh: Added checks for the default delta flag.

	* docs/TODO, docs/missing.txt, docs/FIXED: *** empty log message ***

	* sf-write.cc, sf-prs.cc, sf-prt.cc, sf-get2.cc, sf-admin.cc,
	sf-get.cc, sccsfile.h, sccsfile.cc, filepos.h, get.cc,
	encoding.cc, cssc.h, defaults.h, README, admin.cc, Makefile.am,
	NEWS, ChangeLog: Preliminary support for binary files; creation
	(initialisation) only.

1998-01-24  James Youngman  <jay@gnu.org>

	* docs/BUGS:
	Removed a bug report (by jay@gnu.org, me) that actually wasn't a bug.

	* tests/get/defsid.sh: Wrote tests for the default-SID flag.

	* tests/admin/flags.sh:
	Since we now emit a couple of error messages relating to the "-b"
	flag, we need to IGNORE some of the stderr output in the tests,
	otherwise we procude unwarranted test failures.

	* tests/sccsdiff/rap.sh:
	We can't count on the precise form of the output, but we can count on
	the exit status of the command.   Tests amended for compatibility with
	SCCS.  SCCS now passes :-)

	* tests/get/branch.sh:
	Since we now emit a couple of error messages relating to the "-b"
	flag, we need to IGNORE some of the stderr output in the tests,
	otherwise we procude unwarranted test failures.

	* sccsdiff.sh.in:
	SCCS compatibility fix -- When "get" fails, exit with value 1, not 2.

	* get.cc: Added warnings for when -b flag is ignored because the b
	(branch-enable) flag is not set, and for when -b is udes without -e
	(which does not make sense and is otherwise ignored).

	* _chmod.cc:
	Removed double leading underscore for #define used to prevent multiple
	inclusion.

	* sf-get2.cc:
	Fixed assertion failure for "get -e -r1.1.1 s.foo.c" when there is a
	revision 1.1.1.1.   Probably needs tidying (or at least
	re-generalising).

	* sf-chkid.cc:
	Export the function is_keyword_letter() so that our later support for
	binary as well as text files can be simplified.

	* sccsfile.h, sccsfile.cc: Added sccs_file::branches_allowed().

1998-01-20  James Youngman  <jay@gnu.org>

	* docs/cssc.texi:
	Added documentation on when and how branches are made.

1998-01-19  James Youngman  <jay@gnu.org>

	* tests/get/branch.sh:
	Added tests for the correct handling of the "-b" flag.

1998-01-18  James Youngman  <jay@gnu.org>

	* encoding.cc:
	First show at the uuencode/uudecode methods for the support of binary files.

1998-01-17  James Youngman  <jay@gnu.org>

	* unget.cc, what.cc, rmdel.cc, prs.cc, get.cc, my-getopt.cc,
	delta.cc, ChangeLog, admin.cc: Removed all colons from getopt()
	option descriptors.  Instead we replace them with "!", which tells
	our custom version of getopt() to parse the options in the SCCS
	style (arguments must follow keyletters and may not be in the next
	argv[] element).

	* cssc.h: Only include <config.h> if HAVE_CONFIG_H is defined.

	* configure.in: Updated the version number.

	* testutils/user.c:
	Added this file (which is broadly the equivalent of the standard Unix
	command "id").

	* NEWS: Changes for version 0.05 (changes in Dec 19997 and Jan 1998).

	* ChangeLog:
	Updated for version 0.05 (changes in Dec 19997 and Jan 1998).

	* docs/CREDITS:
	Added paragraph for Richard Polton, and de-emphasised the role of
	MySC.

	* docs/FIXED:
	Moved a bug report (99999 cap on nu,bers of lines in SCCS files) from
	BUGS to FIXED after fixing it.

	* docs/BUGS: Moved a bug report to the FIXED file after fixing it.

	* docs/missing.txt:
	Indicate that sccs-val and sccs-comb have not been implemented.

	* docs/TODO: *** empty log message ***

	* docs/TESTING:
	Indicated that Richard Polton wrote the first contributed test suite.

	* docs/Platforms:
	Added indication that CSSC has been tested under Red Hat version 5.0.

1998-01-16  James Youngman  <jay@gnu.org>

	* docs/get-spec.txt:
	Updated to reflect the fact that the makefile no longer has a "make
	gtest" target.

1998-01-15  James Youngman  <jay@gnu.org>

	* docs/cssc.texi: Documented sact, cdc, rmdel, prt.

	* tests/Makefile.am: Added the test-cdc target.

	* tests/common/test-common:
	The expected stdout/stderr arguments are quoted when they are output
	to temporary files, to prevent any wildcard characters iin them being
	expanded!

	* mystring.h: typo in comment

	* fileiter.h:
	Provide using_stdin(), which indicates if stdin is already in use for
	reading a list of files to operate on.

	* prompt.cc:
	The prompt should not be issued if stdin is not a terminal.

	* sf-cdc.cc, cdc.cc: Using the new test cases, fixed many bugs!

	* tests/cdc/4order.sh, tests/cdc/2comment.sh, tests/cdc/3MRs.sh,
	tests/cdc/1general.sh: Wrote a fairly comlete set of test cases
	for 'cdc'.

1998-01-10  James Youngman  <jay@gnu.org>

	* tests/Makefile.am: Added tests for "sccsdiff".

	* tests/sccsdiff/rap.sh:
	Export $get so that "sccsdiff" can call the correct "get" program.

	* Makefile.am: Renamed list.h to mylist.h.

	* sccsfile.h, sid_list.cc, run.cc, run.h, pipe.cc, rel_list.h,
	l-split.cc, pfile.h, fileiter.h, mylist.h, list.h: Renamed
	"list.h" to "mylist.h".
